<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte por Categoría</title>
    <style>
        #reporte-container {
            margin-top: 20px;
        }
        .reporte-categoria {
            margin-bottom: 15px;
        }
        .reporte-categoria h4 {
            font-size: 1.2em;
            margin-bottom: 5px;
        }
        .reporte-categoria p {
            margin: 5px 0;
        }
    </style>
</head>
<body>

    <h2>Reporte de Ingresos y Gastos por Categoría</h2>
    
    <div id="reporte-container">
        <div id="reporte-categorias"></div>
    </div>

    <script>
        // Obtener las transacciones del almacenamiento local
        const transacciones = JSON.parse(localStorage.getItem('transacciones')) || [];

        // Función para agrupar las transacciones por categoría
        function agruparPorCategoria(transacciones) {
            const reporte = {};

            transacciones.forEach(transaccion => {
                if (!reporte[transaccion.categoria]) {
                    reporte[transaccion.categoria] = { ingresos: 0, gastos: 0 };
                }

                if (transaccion.tipo === 'ingreso') {
                    reporte[transaccion.categoria].ingresos += parseFloat(transaccion.monto);
                } else if (transaccion.tipo === 'gasto') {
                    reporte[transaccion.categoria].gastos += parseFloat(transaccion.monto);
                }
            });

            return reporte;
        }

        // Función para mostrar el reporte de ingresos y gastos por categoría
        function mostrarReporte(reporte) {
            const reporteDiv = document.getElementById('reporte-categorias');
            reporteDiv.innerHTML = ''; // Limpiar contenido anterior

            for (const categoria in reporte) {
                const { ingresos, gastos } = reporte[categoria];
                const patrimonioNeto = ingresos - gastos;

                const categoriaElemento = document.createElement('div');
                categoriaElemento.classList.add('reporte-categoria');
                categoriaElemento.innerHTML = `
                    <h4>${categoria.charAt(0).toUpperCase() + categoria.slice(1)}</h4>
                    <p>Ingresos: ${ingresos.toFixed(2)} Bs</p>
                    <p>Gastos: ${gastos.toFixed(2)} Bs</p>
                    <p>Patrimonio Neto: ${patrimonioNeto.toFixed(2)} Bs</p>
                    <hr>
                `;
                reporteDiv.appendChild(categoriaElemento);
            }
        }

        // Agrupar las transacciones y mostrar el reporte
        const reporte = agruparPorCategoria(transacciones);
        mostrarReporte(reporte);

    </script>

</body>
</html>
